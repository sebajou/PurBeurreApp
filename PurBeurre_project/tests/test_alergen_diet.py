import pytest
from request_api_app.alergen_diet import IsFood


class TestIsFood:

    def setup_method(self):
        self.allergen_list = ['en:fish', 'en:eggs']
        self.diet_type = 'en:vegan'
        self.id_food = 555
        self.id_food_two = 612
        self.food_list_al = [{'id': 818, 'food_name': 'Biscuit pomme noisette', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681851849/biscuit-pomme-noisette-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/185/1849/front_fr.124.400.jpg', 'nutriments_100g': "{'fruits-vegetables-nuts-estimate-from-ingredients_100g': 10.6, 'sugars_100g': 11, 'fat_100g': 17, 'vitamin-b6_100g': 0.00068, 'fiber_100g': 6.6, 'energy_100g': 1902, 'vitamin-pp_100g': 0.0066, 'energy-kcal_100g': 453, 'carbohydrates_100g': 62, 'vitamin-e_100g': 0.0093, 'vitamin-b2_100g': 0.00079, 'vitamin-b9_100g': 0.000131, 'proteins_100g': 9.8, 'sodium_100g': 0.004, 'saturated-fat_100g': 1.5, 'salt_100g': 0.01, 'vitamin-b1_100g': 0.00066, 'energy-kj_100g': 1902}", 'labels_tags': "['en:low-or-no-salt', 'en:low-or-no-sugar', 'en:low-salt', 'en:low-sugar', 'en:reduced-sugar', 'en:made-in-france', 'en:no-colorings', 'en:no-palm-oil', 'en:no-preservatives', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'fr:sirop-de-sucres-issus-de-fruits', 'en:sugar-syrup', 'fr:jus-concentre-de-pomme', 'en:toasted-hazelnut', 'en:nut', 'en:tree-nut', 'en:hazelnut', 'en:wheat-germ', 'en:chicory-fibre', 'en:vegetable', 'en:fiber', 'en:vegetable-fiber', 'en:chicory', 'en:barley-malt-extract', 'en:malt', 'en:malted-barley', 'en:natural-apple-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:emulsifier', 'en:wheat-starch', 'en:starch', 'en:raising-agent', 'en:vitamins', 'en:thiamin', 'en:e101', 'en:vitamin-b6', 'en:folic-acid', 'en:folate', 'en:e375', 'en:vitamin-e', 'en:fructooligosaccharide', 'en:sweetener', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e336', 'en:e501']"}, {'id': 821, 'food_name': 'Biscuits Figue et son', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3251490332080/biscuits-figue-et-son-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/325/149/033/2080/front_fr.95.400.jpg', 'nutriments_100g': "{'energy-kcal_100g': 450, 'energy_100g': 1883, 'phosphorus_100g': 0.359, 'carbohydrates_100g': 54, 'fat_100g': 19, 'sugars_100g': 16, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 10.2, 'fiber_100g': 13, 'salt_100g': 0.19, 'saturated-fat_100g': 1.7, 'proteins_100g': 9.3, 'sodium_100g': 0.076}", 'labels_tags': "['en:no-colorings', 'en:no-palm-oil', 'en:no-preservatives', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:whole-wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:wholemeal-flour', 'en:wheat-flour', 'en:wheat-bran', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:unrefined-cane-sugar', 'en:sugar', 'en:cane-sugar', 'en:unrefined-sugar', 'en:fig-paste', 'en:fruit', 'en:fig', 'en:natural-fig-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:emulsifier', 'en:raising-agent', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e330', 'en:e501', 'en:e500']"}, {'id': 832, 'food_name': 'Goûter 4S aux pommes', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681209282/gouter-4s-aux-pommes-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/120/9282/front_fr.62.400.jpg', 'nutriments_100g': "{'fiber_100g': 5.9, 'potassium_100g': 0.579, 'sodium_100g': 0.028, 'proteins_100g': 7.6, 'fat_100g': 17, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 16.2, 'sugars_100g': 12, 'carbohydrates_100g': 63, 'saturated-fat_100g': 1.4, 'energy_100g': 1870, 'salt_100g': 0.07, 'energy-kcal_100g': 447}", 'labels_tags': "['en:low-or-no-sugar', 'en:low-sugar', 'en:reduced-sugar', 'en:no-colorings']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'fr:jus-concentre-de-pomme', 'fr:semoule-de-pommes', 'en:barley-malt-extract', 'en:malt', 'en:malted-barley', 'en:chicory-fibre', 'en:vegetable', 'en:fiber', 'en:vegetable-fiber', 'en:chicory', 'en:rice', 'en:natural-apricot-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:apple-extract', 'en:fruit-extract', 'en:natural-apple-flavouring', 'en:raising-agent', 'en:emulsifier', 'en:acid', 'en:oat', 'en:milk-proteins', 'en:protein', 'en:animal-protein', 'en:barley-malt-syrup', 'en:syrup', 'en:barley', 'en:wheat-starch', 'en:starch', 'en:fructooligosaccharide', 'en:sweetener', 'en:e501', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e296']"}, {'id': 881, 'food_name': 'Sablé Nature', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681134904/sable-nature-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/113/4904/front_fr.39.400.jpg', 'nutriments_100g': "{'salt_100g': 0.02, 'energy-kcal_100g': 417, 'saturated-fat_100g': 1.2, 'energy_100g': 1745, 'polyols_100g': 22, 'carbohydrates_100g': 71, 'fat_100g': 15, 'sugars_100g': 0.5, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sodium_100g': 0.008, 'proteins_100g': 5.8, 'fiber_100g': 5.2}", 'labels_tags': "['en:low-or-no-sugar', 'en:no-palm-oil', 'en:no-sugar', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:sweetener', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:wheat-starch', 'en:starch', 'en:wheat-fiber', 'en:fiber', 'en:vegetable-fiber', 'en:raising-agent', 'en:natural-flavouring', 'en:flavouring', 'en:emulsifier', 'en:sea-salt', 'en:salt', 'en:e450', 'en:e500', 'en:e503', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i']"}]
        self.food_list_di = [{'id': 818, 'food_name': 'Biscuit pomme noisette', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681851849/biscuit-pomme-noisette-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/185/1849/front_fr.124.400.jpg', 'nutriments_100g': "{'fruits-vegetables-nuts-estimate-from-ingredients_100g': 10.6, 'sugars_100g': 11, 'fat_100g': 17, 'vitamin-b6_100g': 0.00068, 'fiber_100g': 6.6, 'energy_100g': 1902, 'vitamin-pp_100g': 0.0066, 'energy-kcal_100g': 453, 'carbohydrates_100g': 62, 'vitamin-e_100g': 0.0093, 'vitamin-b2_100g': 0.00079, 'vitamin-b9_100g': 0.000131, 'proteins_100g': 9.8, 'sodium_100g': 0.004, 'saturated-fat_100g': 1.5, 'salt_100g': 0.01, 'vitamin-b1_100g': 0.00066, 'energy-kj_100g': 1902}", 'labels_tags': "['en:low-or-no-salt', 'en:low-or-no-sugar', 'en:low-salt', 'en:low-sugar', 'en:reduced-sugar', 'en:made-in-france', 'en:no-colorings', 'en:no-palm-oil', 'en:no-preservatives', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'fr:sirop-de-sucres-issus-de-fruits', 'en:sugar-syrup', 'fr:jus-concentre-de-pomme', 'en:toasted-hazelnut', 'en:nut', 'en:tree-nut', 'en:hazelnut', 'en:wheat-germ', 'en:chicory-fibre', 'en:vegetable', 'en:fiber', 'en:vegetable-fiber', 'en:chicory', 'en:barley-malt-extract', 'en:malt', 'en:malted-barley', 'en:natural-apple-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:emulsifier', 'en:wheat-starch', 'en:starch', 'en:raising-agent', 'en:vitamins', 'en:thiamin', 'en:e101', 'en:vitamin-b6', 'en:folic-acid', 'en:folate', 'en:e375', 'en:vitamin-e', 'en:fructooligosaccharide', 'en:sweetener', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e336', 'en:e501']"}, {'id': 821, 'food_name': 'Biscuits Figue et son', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3251490332080/biscuits-figue-et-son-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/325/149/033/2080/front_fr.95.400.jpg', 'nutriments_100g': "{'energy-kcal_100g': 450, 'energy_100g': 1883, 'phosphorus_100g': 0.359, 'carbohydrates_100g': 54, 'fat_100g': 19, 'sugars_100g': 16, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 10.2, 'fiber_100g': 13, 'salt_100g': 0.19, 'saturated-fat_100g': 1.7, 'proteins_100g': 9.3, 'sodium_100g': 0.076}", 'labels_tags': "['en:no-colorings', 'en:no-palm-oil', 'en:no-preservatives', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:whole-wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:wholemeal-flour', 'en:wheat-flour', 'en:wheat-bran', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:unrefined-cane-sugar', 'en:sugar', 'en:cane-sugar', 'en:unrefined-sugar', 'en:fig-paste', 'en:fruit', 'en:fig', 'en:natural-fig-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:emulsifier', 'en:raising-agent', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e330', 'en:e501', 'en:e500']"}, {'id': 832, 'food_name': 'Goûter 4S aux pommes', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681209282/gouter-4s-aux-pommes-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/120/9282/front_fr.62.400.jpg', 'nutriments_100g': "{'fiber_100g': 5.9, 'potassium_100g': 0.579, 'sodium_100g': 0.028, 'proteins_100g': 7.6, 'fat_100g': 17, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 16.2, 'sugars_100g': 12, 'carbohydrates_100g': 63, 'saturated-fat_100g': 1.4, 'energy_100g': 1870, 'salt_100g': 0.07, 'energy-kcal_100g': 447}", 'labels_tags': "['en:low-or-no-sugar', 'en:low-sugar', 'en:reduced-sugar', 'en:no-colorings']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'fr:jus-concentre-de-pomme', 'fr:semoule-de-pommes', 'en:barley-malt-extract', 'en:malt', 'en:malted-barley', 'en:chicory-fibre', 'en:vegetable', 'en:fiber', 'en:vegetable-fiber', 'en:chicory', 'en:rice', 'en:natural-apricot-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:apple-extract', 'en:fruit-extract', 'en:natural-apple-flavouring', 'en:raising-agent', 'en:emulsifier', 'en:acid', 'en:oat', 'en:milk-proteins', 'en:protein', 'en:animal-protein', 'en:barley-malt-syrup', 'en:syrup', 'en:barley', 'en:wheat-starch', 'en:starch', 'en:fructooligosaccharide', 'en:sweetener', 'en:e501', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e296']"}, {'id': 881, 'food_name': 'Sablé Nature', 'category': 'biscuit', 'scora_nova_group': 4, 'nutri_score_grad': 'a', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681134904/sable-nature-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/113/4904/front_fr.39.400.jpg', 'nutriments_100g': "{'salt_100g': 0.02, 'energy-kcal_100g': 417, 'saturated-fat_100g': 1.2, 'energy_100g': 1745, 'polyols_100g': 22, 'carbohydrates_100g': 71, 'fat_100g': 15, 'sugars_100g': 0.5, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sodium_100g': 0.008, 'proteins_100g': 5.8, 'fiber_100g': 5.2}", 'labels_tags': "['en:low-or-no-sugar', 'en:no-palm-oil', 'en:no-sugar', 'en:nutriscore', 'en:nutriscore-grade-a']", 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:sweetener', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:wheat-starch', 'en:starch', 'en:wheat-fiber', 'en:fiber', 'en:vegetable-fiber', 'en:raising-agent', 'en:natural-flavouring', 'en:flavouring', 'en:emulsifier', 'en:sea-salt', 'en:salt', 'en:e450', 'en:e500', 'en:e503', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i']"}]
        self.food_list_without_allergen = [{'id': 240, 'food_name': 'Gerblé Sans Sucre Gâteau Fourré Chocolat', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681231801/gerble-sans-sucre-gateau-fourre-chocolat', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/123/1801/front_fr.14.400.jpg', 'nutriments_100g': "{'energy-kcal_100g': 321, 'salt_100g': 0.9, 'saturated-fat_100g': 2.4, 'energy_100g': 1343, 'carbohydrates_100g': 57, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sugars_100g': 0.2, 'fat_100g': 15, 'proteins_100g': 4.7, 'sodium_100g': 0.36, 'fiber_100g': 2.5}", 'labels_tags': "['en:with-sweeteners']", 'ingredients_tags': "['en:sweetener', 'en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:egg', 'fr:huite-de-colza', 'en:humectant', 'fr:chocolat-avec-edulcorant', 'en:stabiliser', 'en:wheat-starch', 'en:starch', 'en:fat-reduced-cocoa-powder', 'en:cocoa', 'en:cocoa-powder', 'en:natural-flavouring', 'en:flavouring', 'en:raising-agent', 'en:thickener', 'en:natural-cocoa-flavouring', 'en:sea-salt', 'en:salt', 'en:gelling-agent', 'en:e965', 'en:cocoa-paste', 'en:cocoa-butter', 'en:emulsifier', 'en:natural-vanilla-flavouring', 'en:vanilla-flavouring', 'en:e420', 'en:alcohol', 'en:e450', 'en:e500', 'en:modified-starch', 'en:e415', 'en:e412', 'en:e440a', 'en:soya-lecithin', 'en:e322', 'en:e322i']"}, {'id': 186, 'food_name': 'Cake aux fruits', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'd', 'food_url': 'https://fr.openfoodfacts.org/produit/20928704/cake-aux-fruits-sondey', 'image_src': 'https://static.openfoodfacts.org/images/products/20928704/front_fr.49.400.jpg', 'nutriments_100g': "{'saturated-fat_100g': 2.3, 'energy_100g': 1623, 'energy-kcal_100g': 388, 'salt_100g': 0.78, 'carbohydrates_100g': 58, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 38.5, 'sugars_100g': 35, 'fat_100g': 15, 'fiber_100g': 0, 'sodium_100g': 0.312, 'proteins_100g': 4.4}", 'labels_tags': '[]', 'ingredients_tags': "['en:fruit', 'en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:fresh-egg', 'en:egg', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:sugar', 'en:stabiliser', 'en:emulsifier', 'en:modified-corn-starch', 'en:starch', 'en:corn-starch', 'en:modified-starch', 'en:salt', 'en:raising-agent', 'en:e500', 'en:natural-orange-flavouring', 'en:flavouring', 'en:natural-flavouring', 'en:preservative', 'en:thickener', 'en:acid', 'fr:cerises-confites', 'en:cherry', 'en:raisin', 'en:grape', 'fr:raisins-maceree', 'en:watermelon', 'en:melon', 'en:candied-orange-peel', 'en:citrus-fruit', 'en:orange', 'en:orange-zest', 'en:e422', 'en:e471', 'en:e450', 'en:e202', 'en:e415', 'en:e330', 'en:glucose-fructose-syrup', 'en:glucose', 'en:fructose', 'fr:jus-concentres-de-fruits-et-de-vegetaux', 'en:acidity-regulator', 'en:rum', 'en:alcohol', 'en:water', 'en:e220', 'en:colour', 'en:chokeberry', 'en:carrot', 'en:vegetable', 'en:root-vegetable', 'en:sour-cherry', 'en:sweet-potato', 'en:radish', 'en:apple', 'en:e120']"}, {'id': 247, 'food_name': 'Milka choco pépites', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'e', 'food_url': 'https://fr.openfoodfacts.org/produit/7622210388100/milka-choco-pepites', 'image_src': 'https://static.openfoodfacts.org/images/products/762/221/038/8100/front_fr.12.400.jpg', 'nutriments_100g': "{'carbohydrates_100g': 55, 'energy_100g': 1862, 'saturated-fat_100g': 11, 'energy-kcal_100g': 445, 'salt_100g': 0.9, 'fiber_100g': 1.7, 'sodium_100g': 0.36, 'proteins_100g': 5, 'sugars_100g': 32, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'fat_100g': 23}", 'labels_tags': '[]', 'ingredients_tags': "['en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'fr:pepites-de-chocolat-au-lait-du-pays-alpin', 'en:vegetable-fat', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:egg', 'en:glucose-fructose-syrup', 'en:glucose', 'en:fructose', 'en:sugar', 'en:stabiliser', 'en:lactose-and-milk-proteins', 'en:protein', 'en:animal-protein', 'en:milk-proteins', 'en:lactose', 'en:raising-agent', 'en:emulsifier', 'en:skimmed-milk-powder', 'en:dairy', 'en:milk-powder', 'en:salt', 'en:flavouring', 'en:thickener', 'en:glucose-syrup', 'en:whole-milk-powder', 'en:e422', 'en:e450i', 'en:e450', 'en:e500ii', 'en:e500', 'en:e471', 'en:e472b', 'en:e475', 'en:e415']"}, {'id': 211, 'food_name': 'Financiers aux amandes bio', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'e', 'food_url': 'https://fr.openfoodfacts.org/produit/20297091/financiers-aux-amandes-bio-sondey', 'image_src': 'https://static.openfoodfacts.org/images/products/20297091/front_fr.31.400.jpg', 'nutriments_100g': "{'saturated-fat_100g': 13, 'energy_100g': 1958, 'energy-kcal_100g': 468, 'salt_100g': 0.25, 'carbohydrates_100g': 44, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sugars_100g': 39, 'fat_100g': 28, 'proteins_100g': 8.8, 'sodium_100g': 0.1}", 'labels_tags': "['en:organic', 'en:eu-organic', 'en:eu-agriculture', 'en:fr-bio-01']", 'ingredients_tags': "['fr:sucre-de-canne1-roux', 'fr:blancs-d-oeufs-20-beurre', 'fr:poudre-d-amandes-farine-de-ble', 'en:glucose-fructose-syrup', 'en:glucose', 'en:fructose', 'en:salt', 'en:natural-flavouring', 'en:flavouring', 'en:raising-agent', 'en:natural-vanilla-flavouring', 'en:vanilla-flavouring', 'fr:aromes-naturels1', 'en:milk', 'en:dairy', 'en:e503', 'en:alcohol']"}]
        self.food_list_without_diet = [{'id': 164, 'food_name': 'Avoine complet', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'b', 'food_url': 'https://fr.openfoodfacts.org/produit/3229820794532/avoine-complet-bjorg', 'image_src': 'https://static.openfoodfacts.org/images/products/322/982/079/4532/front_fr.117.400.jpg', 'nutriments_100g': "{'proteins_100g': 8.2, 'sodium_100g': 0.12, 'energy-kj_100g': 1863, 'salt_100g': 0.3, 'saturated-fat_100g': 1.3, 'fiber_100g': 7.9, 'iron_100g': 0.0021, 'fat_100g': 15, 'sugars_100g': 16, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'carbohydrates_100g': 65, 'energy-kcal_100g': 444, 'energy_100g': 1863, 'magnesium_100g': 0.0669}", 'labels_tags': "['en:low-or-no-sugar', 'en:low-sugar', 'en:organic', 'en:eu-organic', 'en:reduced-sugar', 'en:35-less-sugar', 'en:ab-agriculture-biologique', 'en:eu-agriculture', 'en:eu-non-eu-agriculture', 'en:fr-bio-01', 'en:palm-oil-free']", 'ingredients_tags': "['en:oat-flakes', 'en:cereal', 'en:oat', 'en:wheat-flour', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:unrefined-cane-sugar', 'en:sugar', 'en:cane-sugar', 'en:unrefined-sugar', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'fr:billes-de-riz-souffle', 'en:stabiliser', 'en:honey', 'en:raising-agent', 'en:e500', 'en:emulsifier', 'en:sea-salt', 'en:salt', 'en:antioxidant', 'en:rice-flour', 'en:rice', 'en:e414', 'en:e503', 'en:sunflower-lecithin', 'en:e322', 'en:e322i', 'en:e392']"}, {'id': 252, 'food_name': 'Madeleines aux oeufs Gerblé', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681054158/madeleines-aux-oeufs-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/105/4158/front_fr.29.400.jpg', 'nutriments_100g': "{'proteins_100g': 4.6, 'sodium_100g': 0.256, 'energy-kj_100g': 1821, 'saturated-fat_100g': 2.2, 'salt_100g': 0.64, 'fiber_100g': 4.4, 'fat_100g': 22, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 13.3, 'sugars_100g': 21, 'carbohydrates_100g': 49, 'polyols_100g': 6.2, 'energy_100g': 1821, 'energy-kcal_100g': 411}", 'labels_tags': "['en:gluten-free', 'en:no-lactose', 'en:palm-oil-free']", 'ingredients_tags': "['en:egg', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:potato-starch', 'en:starch', 'en:rice-flour', 'en:flour', 'en:rice', 'en:sugar', 'en:dextrose', 'en:glucose', 'en:humectant', 'en:glucose-syrup', 'en:chicory-fibre', 'en:vegetable', 'en:fiber', 'en:vegetable-fiber', 'en:chicory', 'en:flavouring', 'en:thickener', 'en:rice-starch', 'en:emulsifier', 'en:raising-agent', 'en:salt', 'en:e1510', 'en:e422', 'en:inulin', 'en:e412', 'en:rapeseed-lecithin', 'en:e322', 'en:e322i', 'en:e330', 'en:e500']"}, {'id': 240, 'food_name': 'Gerblé Sans Sucre Gâteau Fourré Chocolat', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681231801/gerble-sans-sucre-gateau-fourre-chocolat', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/123/1801/front_fr.14.400.jpg', 'nutriments_100g': "{'energy-kcal_100g': 321, 'salt_100g': 0.9, 'saturated-fat_100g': 2.4, 'energy_100g': 1343, 'carbohydrates_100g': 57, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sugars_100g': 0.2, 'fat_100g': 15, 'proteins_100g': 4.7, 'sodium_100g': 0.36, 'fiber_100g': 2.5}", 'labels_tags': "['en:with-sweeteners']", 'ingredients_tags': "['en:sweetener', 'en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:egg', 'fr:huite-de-colza', 'en:humectant', 'fr:chocolat-avec-edulcorant', 'en:stabiliser', 'en:wheat-starch', 'en:starch', 'en:fat-reduced-cocoa-powder', 'en:cocoa', 'en:cocoa-powder', 'en:natural-flavouring', 'en:flavouring', 'en:raising-agent', 'en:thickener', 'en:natural-cocoa-flavouring', 'en:sea-salt', 'en:salt', 'en:gelling-agent', 'en:e965', 'en:cocoa-paste', 'en:cocoa-butter', 'en:emulsifier', 'en:natural-vanilla-flavouring', 'en:vanilla-flavouring', 'en:e420', 'en:alcohol', 'en:e450', 'en:e500', 'en:modified-starch', 'en:e415', 'en:e412', 'en:e440a', 'en:soya-lecithin', 'en:e322', 'en:e322i']"}, {'id': 188, 'food_name': "Le Cake à l'Anglaise", 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3088866541056/le-cake-a-l-anglaise-brossard', 'image_src': 'https://static.openfoodfacts.org/images/products/308/886/654/1056/front_fr.66.400.jpg', 'nutriments_100g': "{'proteins_100g': 4.1, 'sodium_100g': 0.152, 'fruits-vegetables-nuts-estimate_100g': 15, 'energy-kj_100g': 1452, 'salt_100g': 0.38, 'saturated-fat_100g': 0.9, 'fiber_100g': 3.2, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 36.8, 'sugars_100g': 38, 'fat_100g': 9.8, 'carbohydrates_100g': 60, 'energy-kcal_100g': 345, 'energy_100g': 1452}", 'labels_tags': "['en:green-dot', 'en:made-in-france', 'en:no-palm-oil', 'en:nutriscore', 'en:nutriscore-grade-c', 'fr:triman']", 'ingredients_tags': "['en:fruit', 'en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:raisin', 'en:grape', 'en:fresh-egg', 'en:egg', 'en:sugar', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:stabiliser', 'en:glucose-fructose-syrup', 'en:glucose', 'en:fructose', 'en:barley-malt-extract', 'en:malt', 'en:malted-barley', 'en:dextrose', 'fr:extrait-aromatique', 'fr:infusion-d-ecorces-d-oranges-douces', 'en:flavouring', 'en:raising-agent', 'en:e500', 'en:gelling-agent', 'en:salt', 'en:natural-orange-flavouring', 'en:natural-flavouring', 'en:acidity-regulator', 'en:malted-wheat-flour', 'en:preservative', 'en:sweet-cherry', 'en:papaya', 'en:vegetable-oil', 'fr:coton', 'en:e420', 'en:rum', 'en:alcohol', 'en:e450', 'en:e401', 'en:e330', 'en:e220', 'en:acid', 'en:colour', 'en:e202', 'en:e120']"}, {'id': 237, 'food_name': 'Le Riz au Lait à la Vanille de Madagascar', 'category': 'gateau', 'scora_nova_group': 3, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3279231500000/le-riz-au-lait-a-la-vanille-de-madagascar-la-fermiere', 'image_src': 'https://static.openfoodfacts.org/images/products/327/923/150/0000/front_fr.42.400.jpg', 'nutriments_100g': "{'fat_100g': 6.6, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0, 'sugars_100g': 11, 'proteins_100g': 3.3, 'sodium_100g': 0.076, 'salt_100g': 0.19, 'energy-kcal_100g': 150, 'saturated-fat_100g': 4.2, 'energy_100g': 628, 'carbohydrates_100g': 19}", 'labels_tags': "['fr:eleveurs-laitiers-de-france', 'fr:fabrique-en-laiterie-industrielle', 'fr:la-qualite-100-bonheur-depuis-1952']", 'ingredients_tags': "['en:whole-milk', 'en:dairy', 'en:milk', 'en:camargue-rice', 'en:rice', 'en:cream', 'en:sugar', 'fr:infusion-de-gousses-de-vanille', 'fr:feve-tonka-poudre']"}, {'id': 219, 'food_name': 'Moelleux saveur citron', 'category': 'gateau', 'scora_nova_group': 4, 'nutri_score_grad': 'c', 'food_url': 'https://fr.openfoodfacts.org/produit/3175681187931/moelleux-saveur-citron-gerble', 'image_src': 'https://static.openfoodfacts.org/images/products/317/568/118/7931/front_fr.7.400.jpg', 'nutriments_100g': "{'carbohydrates_100g': 54, 'polyols_100g': 35, 'energy_100g': 1469, 'saturated-fat_100g': 2, 'salt_100g': 1, 'energy-kcal_100g': 351, 'proteins_100g': 5.1, 'sodium_100g': 0.4, 'fat_100g': 19, 'sugars_100g': 0, 'fruits-vegetables-nuts-estimate-from-ingredients_100g': 0}", 'labels_tags': "['en:low-or-no-sugar', 'en:made-in-france', 'en:no-sugar']", 'ingredients_tags': "['en:sweetener', 'en:wheat-flour', 'en:cereal', 'en:flour', 'en:wheat', 'en:cereal-flour', 'en:egg', 'en:colza-oil', 'en:oil-and-fat', 'en:vegetable-oil-and-fat', 'en:rapeseed-oil', 'en:stabiliser', 'en:wheat-starch', 'en:starch', 'en:raising-agent', 'en:natural-flavouring', 'en:flavouring', 'en:e1510', 'en:sea-salt', 'en:salt', 'en:natural-vanilla-flavouring', 'en:vanilla-flavouring', 'en:natural-lemon-flavouring', 'en:thickener', 'en:e965', 'en:e420', 'en:e450', 'en:e500', 'en:xanthan-gum-and-guar-gum', 'en:e412', 'en:e415']"}]
        self.id_user = 1

    @pytest.mark.django_db(transaction=True)
    def test_is_allergen(self):
        allergens = self.allergen_list
        a_food = self.id_food
        is_or_not = IsFood()

        bool_is_allergen = is_or_not.is_allergen(allergen_list=allergens, id_food=a_food)

        assert bool_is_allergen

    @pytest.mark.django_db(transaction=True)
    def test_is_diet(self):
        a_food = self.id_food_two
        a_diet = self.diet_type
        is_or_not = IsFood()

        bool_is_diet = is_or_not.is_diet(diet_type=a_diet, id_food=a_food)

        assert not bool_is_diet

    @pytest.mark.django_db(transaction=True)
    def test_remove_food_from_allergen(self):
        with_allergen = self.food_list_al
        without_allergen = self.food_list_without_allergen
        user = self.id_user
        remove_from_list = IsFood()

        calc_list_without_allergen = remove_from_list.remove_food_from_allergen(food_dict=with_allergen, user_id=user)

        assert calc_list_without_allergen in without_allergen

    @pytest.mark.django_db(transaction=True)
    def test_remove_food_from_diet(self):
        with_diet = self.food_list_di
        without_diet = self.food_list_without_diet
        user = self.id_user
        remove_from_list = IsFood()

        calc_list_without_diet = remove_from_list.remove_food_from_diet(food_dict=with_diet, user_id=user)

        assert calc_list_without_diet in without_diet
